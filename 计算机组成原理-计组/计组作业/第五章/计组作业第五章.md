# 5.3

### **5.3.1**

8

### **5.3.2**

32

### **5.3.3**

1+(22/8/32)=1.086

### **5.3.4**

3

### 5.3.5

0.25

### **5.3.6**

<Index, tag, data>

<0000012, 00012, mem[1024]>

<0000012, 00112, mem[16]>

<0010112, 00002, mem[176]>

<0010002, 00102, mem[2176]>

<0011102, 00002, mem[224]>

<0010102, 00002, mem[160]>

# **5.4**

### **5.4.1**

L1 缓存的写入未命中惩罚较低，而 L2 缓存的写入未命中惩罚较高。L1 和 L2 缓存之间的写入缓冲区将隐藏 L2 缓存的写入未命中延迟。在替换脏块时，L2 缓存将受益于写入缓冲区，因为在脏块物理写入内存之前，新块将被读入。

### **5.4.2**

在 L1 写入未命中时，字直接写入 L2，而不会将其块带入 L1 缓存。如果这导致 L2 未命中，则必须将其块引入 L2 缓存，可能会替换必须首先写入内存的脏块。

### **5.4.3**

在 L1 写入未命中后，块将驻留在 L2 中，但不驻留在 L1 中。同一块的后续读取未命中将要求将 L2 中的块写回内存，传输到 L1，并在 L2 中失效。

### **5.4.4**

四分之一的指令是数据读取，十分之一的指令是数据写入。对于 CPI 为 2，每个周期有 0.5 个指令访问，12.5% 的周期需要数据读取，5% 的周期需要数据写入。因此，指令带宽为(0.0030\*64)\*0.5=0.096 字节/周期。因此，数据读取带宽为 0.02\*(0.13+0.050)\*64=0.23 字节/周期。总读取带宽要求为 0.33 字节/周期。数据写入带宽要求为 0.05*4=0.2 字节/周期。

### **5.4.5**

指令和数据读取带宽要求与5.4.4相同。数据写入带宽要求变为0.02\*0.30(0.13+0.050)\*64=0.069字节/周期。

### **5.4.6**

对于 CPI 1.5，指令吞吐量变为 1/1.5 每个周期 0.67 条指令。数据读取频率变为0.25/1.5=0.17，写入频率变为0.10/1.5=0.067。指令带宽为(0.0030\*64)\*0.67=0.13 字节/周期。对于直写缓存，数据读取带宽为 0.02\*(0.17 0.067)\*64=0.22 字节/周期。总读取带宽为 0.35 字节/周期。数据写入带宽为 0.067*4=0.27 字节/周期。对于回写缓存，数据写入带宽变为 0.02\*0.30\*(0.17+0.067)\*64=0.091 字节/周期。

# **5.6**

### **5.6.1**

P1: 1.52GHz

P2: 1.11GHz

### **5.6.2**

P1: 6.31ns, 9.56cycles

P2: 5.11ns, 5.68cycles

### **5.6.3**

P1: 12.64CPI, 8.34ns/inst

P2: 7.36CPI, 6.63ns/inst

### **5.6.4**

6.50ns, 9.85cycles,更差了

### **5.6.5**

13.04

### **5.6.6**

P1 AMAT = 0.66ns + 0.08*70ns = 6.26ns

P2 AMAT = 0.90ns + 0.06\*(5.62ns + 0.95\*70ns) = 5.23ns

MR = (5.23-0.66)/70 = 6.5%

# **5.12**

### **5.12.1**

PTE: 2^31

物理存储器: 8GB

### **5.12.2**

需要两级，访问两次

### **5.12.3**

在倒页表中，PTE 的数量可以减少到哈希表的大小加上冲突的成本。在这种情况下，提供 TLB 未命中需要额外的引用来比较存储在哈希表中的一个或多个标记。

### **5.12.4**

如果被分页到磁盘就是无效的。

### **5.12.5**

写入第 30 页将生成 TLB 未命中。因此，在软件可以预取 TLB 条目的情况下，软件管理的 TLB 速度更快。

### **5.12.6**

当指令写入VA第200页时，将产生中断，因为该页被标记为只读。